#include <iostream>
#include <QString>
#include <QRegularExpression>
#include <cmath>

int main() {
    QString expression = "1+cos(2)*3 + 1.2e+10 - 23/( sqrt(9)-2)";
    QString result;

    QRegularExpression tokenRegex("(\\d+\\.?\\d*(?:e[+-]?\\d+)?)|([^\\s]+)");
    QRegularExpressionMatchIterator tokenIterator = tokenRegex.globalMatch(expression);

    while (tokenIterator.hasNext()) {
        QRegularExpressionMatch match = tokenIterator.next();
        QString token = match.captured();

        if (token.contains('e') || token.contains('E')) {
            double number = token.toDouble();
            result += QString::number(number, 'g', 15);
        }
        else {
            result += token;
        }
    }

    std::cout << "Original expression: " << expression.toStdString() << std::endl;
    std::cout << "Transformed expression: " << result.toStdString() << std::endl;

    return 0;
}
