#include <QApplication>
#include <QMainWindow>
#include <QLineEdit>
#include <QCompleter>
#include <QListView>

class MainWindow : public QMainWindow {
    Q_OBJECT
public:
    MainWindow(QWidget *parent = nullptr) : QMainWindow(parent) {
        setWindowTitle("QCompleter Highlight Example");

        QWidget *centralWidget = new QWidget(this);
        QVBoxLayout *layout = new QVBoxLayout(centralWidget);

        QLineEdit *lineEdit = new QLineEdit(this);
        QCompleter *completer = new QCompleter(QStringList() << "Item 1" << "Item 2" << "Item 3");

        completer->setPopup(new QListView());  // Используем QListView для более точного контроля
        lineEdit->setCompleter(completer);

        // Применение QSS для стилизации подсветки при наведении
        completer->popup()->setStyleSheet(
            "QListView::item:hover {"
            "    background-color: palette(Highlight);"
            "    color: palette(HighlightedText);"
            "}"
            "QListView::item:selected {"
            "    background-color: palette(Highlight);"
            "    color: palette(HighlightedText);"
            "}"
        );

        layout->addWidget(lineEdit);
        centralWidget->setLayout(layout);
        setCentralWidget(centralWidget);
    }
};

int main(int argc, char *argv[]) {
    QApplication app(argc, argv);
    MainWindow window;
    window.show();
    return app.exec();
}

#include "main.moc"
